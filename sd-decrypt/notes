"stage" SD is running on crabby

Source url is

  http://zmdxuykqj2ouq4yi.onion/

Journalist URL is

  http://avgfxawdn6c3coe3.onion/

  joshua / allcreationbows , 2FA is on google app on iphone

Journalist hidden service auth is

  HidServAuth avgfxawdn6c3coe3.onion Il8Xas7uf6rjtc0LxYwhrx # client: journalist

That line just needs to go in /etc/tor/torrc on the sd-whonix VM


Here is a source code:

  flock unfocused dust rebound refinance moonwalk partly

in the journalist UI, that user is

  distinguishable rumen

SD encrypts everything using GPG. The keys are in XXX (see slack!). The secure key needs to added to the disp VM, and `gpg --import secure.sec` needs to be run there. For development, do the same to the `work` vm.

-----

What happens when file downloaded in journalist workstation?

User should trigger script which:

   - tar's up downloaded files, names it blah.sd-xfer
   - runs this:

       qvm-open-in-dvm blah.sd-xfer

    or for development:

      qvm-open-in-vm work blah.sd-xfer

That is the move-to-svs script in sd_journalist:~/projects/sd/

The disp vm template (and for development the work vm) must be configured to open files of that type with the next script. First, the xml file in this directory should be installed at

    /usr/share/mime/packages/application-x-sd-xfer.xml 

and the .desktop here should be placed in

    /usr/share/applications/

(this all from https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Desktop_Migration_and_Administration_Guide/File_Formats.html)

Then you need to update the mime and application databases:

    sudo update-mime-database /usr/share/mime
    sudo update-desktop-database /usr/share/applications

Those steps configure xdg-open to open `.sd-xfer` files using the `decrypt-sd-submission` script, in this directory. That script should be symlinked in ~/bin/ (and in disp vms, the script should be copied to ~/bin/).

That script untars the file, unzips each file in the tarball, decrypts each file in each zip, re-tar's the results into a file with a `.sd-xfer-extracted` extension, the opens that file in the sd-svs VM.

The sd-svs VM is mostly a respository for those decrypted files. It's configured to open `.sd-xfer-extracted` files with a script which simply untars the file into the ~/Sources directory. See sd-svs:~/projects/sd/ - it contains the script, plus .desktop and .xml files for handling those file types.

That all seems to be working pretty well. 

--- 

Opening files in the SVS VM.

By default, we want *all* files in the sd-svs VM to be opened in disposable VMs  (except .sd-xfer-extracted files). This is sorta hard, but we'll try! Maybe we can remove *all* files in /usr/share/mime/, and have a single "mime type" which is handle by a scrpit which just `qvm-open-in-dvm`s. Of course we'd want to leave the mime type for `.sd-xfer-extractred`, too.
